__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.errorService=e.default=void 0;var t=r(d[0]),s=r(d[1]);class o{errorContext={};breadcrumbs=[];maxBreadcrumbs=50;constructor(){}static getInstance(){return o.instance||(o.instance=new o),o.instance}initialize(t){this.errorContext=Object.assign({},this.errorContext,t)}setUser(t,s){this.errorContext.userId=t,s&&(this.errorContext.metadata=Object.assign({},this.errorContext.metadata,s))}setScreen(t){this.errorContext.screenName=t,this.addBreadcrumb('navigation',`Navigated to ${t}`)}addBreadcrumb(t,s,o){const n={timestamp:Date.now(),type:t,message:s,data:o};this.breadcrumbs.push(n),this.breadcrumbs.length>this.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(-this.maxBreadcrumbs))}mapErrorToUserMessage(s){if(s.userMessage)return s.userMessage;if(s.category)return this.getMessageByCategory(s);if(s.statusCode||s.status){const o=String(s.statusCode||s.status);return(0,t.getErrorMessageByCode)(o)}return s.code?this.mapErrorCodeToMessage(s.code):s.message?.toLowerCase().includes('network')?t.ERROR_MESSAGES.network.offline:s.message?.toLowerCase().includes('timeout')?t.ERROR_MESSAGES.network.timeout:t.ERROR_MESSAGES.general.somethingWrong}getMessageByCategory(o){switch(o.category){case s.ErrorCategory.NETWORK:return this.getNetworkErrorMessage(o);case s.ErrorCategory.VALIDATION:return this.getValidationErrorMessage(o);case s.ErrorCategory.AUTHENTICATION:return t.ERROR_MESSAGES.authentication.loginFailed;case s.ErrorCategory.PAYMENT:return t.ERROR_MESSAGES.payment.failed;case s.ErrorCategory.EVENT:return t.ERROR_MESSAGES.event.notFound;case s.ErrorCategory.PERMISSION:return t.ERROR_MESSAGES.permission.cameradenied;case s.ErrorCategory.FILE:return t.ERROR_MESSAGES.file.uploadFailed;case s.ErrorCategory.SYSTEM:return t.ERROR_MESSAGES.system.maintenance;default:return t.ERROR_MESSAGES.general.somethingWrong}}getNetworkErrorMessage(s){switch(s.statusCode){case 400:return t.ERROR_MESSAGES.validation.invalidFormat;case 401:case 403:return t.ERROR_MESSAGES.authentication.unauthorized;case 404:return t.ERROR_MESSAGES.network.notFound;case 408:return t.ERROR_MESSAGES.network.timeout;case 429:return t.ERROR_MESSAGES.warning.limitReached;case 500:case 502:case 503:return t.ERROR_MESSAGES.network.serverError;default:return t.ERROR_MESSAGES.network.requestFailed}}getValidationErrorMessage(s){if(s.fields){const t=Object.keys(s.fields);if(t.length>0){const o=t[0],n=s.fields[o];if(n&&n.length>0)return this.mapValidationMessageToUserMessage(n[0])}}return t.ERROR_MESSAGES.validation.invalidFormat}mapValidationMessageToUserMessage(s){const o=s.toLowerCase();if(o.includes('required'))return t.ERROR_MESSAGES.validation.required;if(o.includes('email'))return t.ERROR_MESSAGES.validation.invalidEmail;if(o.includes('password')){if(o.includes('short'))return t.ERROR_MESSAGES.validation.passwordTooShort;if(o.includes('weak'))return t.ERROR_MESSAGES.validation.passwordTooWeak;if(o.includes('match'))return t.ERROR_MESSAGES.validation.passwordMismatch}return o.includes('phone')?t.ERROR_MESSAGES.validation.invalidPhoneNumber:o.includes('date')?t.ERROR_MESSAGES.validation.invalidDate:o.includes('amount')?t.ERROR_MESSAGES.validation.invalidAmount:t.ERROR_MESSAGES.validation.invalidFormat}mapErrorCodeToMessage(s){return{ECONNREFUSED:t.ERROR_MESSAGES.network.serverError,ENOTFOUND:t.ERROR_MESSAGES.network.offline,ETIMEDOUT:t.ERROR_MESSAGES.network.timeout,ECONNRESET:t.ERROR_MESSAGES.network.requestFailed,AUTH_FAILED:t.ERROR_MESSAGES.authentication.loginFailed,INVALID_TOKEN:t.ERROR_MESSAGES.authentication.sessionExpired,UNAUTHORIZED:t.ERROR_MESSAGES.authentication.unauthorized,PAYMENT_FAILED:t.ERROR_MESSAGES.payment.failed,CARD_DECLINED:t.ERROR_MESSAGES.payment.declined,INSUFFICIENT_FUNDS:t.ERROR_MESSAGES.payment.insufficientFunds,EVENT_NOT_FOUND:t.ERROR_MESSAGES.event.notFound,EVENT_FULL:t.ERROR_MESSAGES.event.full,REGISTRATION_CLOSED:t.ERROR_MESSAGES.event.registrationClosed,FILE_TOO_LARGE:t.ERROR_MESSAGES.file.sizeTooLarge,INVALID_FILE_TYPE:t.ERROR_MESSAGES.file.invalidType,UPLOAD_FAILED:t.ERROR_MESSAGES.file.uploadFailed}[s]||t.ERROR_MESSAGES.general.somethingWrong}logError(t,s){const o=this.normalizeError(t),n=this.determineSeverity(o),E={error:o,context:Object.assign({},this.errorContext,{breadcrumbs:[...this.breadcrumbs]}),severity:n,timestamp:Date.now()};this.sendToCrashlytics(E),this.addBreadcrumb('error',o.message,{code:o.code})}normalizeError(t){if(t.category)return t;return{name:t.name||'UnknownError',message:t.message||'An unknown error occurred',code:t.code,statusCode:t.statusCode||t.status,category:this.determineCategory(t),details:t.details||t.response?.data,timestamp:Date.now(),stack:t.stack}}determineCategory(t){const o=t.message?.toLowerCase()||'',n=t.code?.toLowerCase()||'';return o.includes('network')||o.includes('fetch')||n.includes('econ')?s.ErrorCategory.NETWORK:o.includes('auth')||o.includes('login')||o.includes('token')?s.ErrorCategory.AUTHENTICATION:o.includes('valid')||400===t.statusCode?s.ErrorCategory.VALIDATION:o.includes('payment')||o.includes('card')||o.includes('transaction')?s.ErrorCategory.PAYMENT:o.includes('event')||o.includes('ticket')||o.includes('registration')?s.ErrorCategory.EVENT:o.includes('permission')||o.includes('denied')?s.ErrorCategory.PERMISSION:o.includes('file')||o.includes('upload')||o.includes('download')?s.ErrorCategory.FILE:s.ErrorCategory.UNKNOWN}determineSeverity(t){return t.category===s.ErrorCategory.PAYMENT||500===t.statusCode?s.ErrorSeverity.CRITICAL:t.category===s.ErrorCategory.AUTHENTICATION||t.category===s.ErrorCategory.SYSTEM?s.ErrorSeverity.HIGH:t.category===s.ErrorCategory.NETWORK||t.category===s.ErrorCategory.VALIDATION?s.ErrorSeverity.MEDIUM:s.ErrorSeverity.LOW}sendToCrashlytics(t){}createErrorFromResponse(t){const o=t.status||t.statusCode,n=t.data||t;return n.error?this.normalizeError(Object.assign({},n.error,{statusCode:o})):n.errors&&'object'==typeof n.errors?(0,s.createValidationError)(n.message||'Validation failed',n.errors,{statusCode:o}):o>=400?(0,s.createNetworkError)(n.message||`Request failed with status ${o}`,o,{details:n}):this.normalizeError({message:n.message||'An error occurred',statusCode:o,details:n})}clear(){this.errorContext={},this.breadcrumbs=[]}}const n=e.errorService=o.getInstance();e.default=n},2001,[1002,2002]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isValidationError=e.isPermissionError=e.isPaymentError=e.isNetworkError=e.isFileError=e.isEventError=e.isAuthenticationError=e.createValidationError=e.createPermissionError=e.createPaymentError=e.createNetworkError=e.createFileError=e.createEventError=e.createAuthenticationError=e.ErrorSeverity=e.ErrorCategory=void 0;let t=e.ErrorCategory=(function(t){return t.NETWORK="network",t.AUTHENTICATION="authentication",t.VALIDATION="validation",t.PAYMENT="payment",t.EVENT="event",t.USER="user",t.FILE="file",t.PERMISSION="permission",t.SYSTEM="system",t.UNKNOWN="unknown",t})({});e.ErrorSeverity=(function(t){return t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical",t})({});e.isNetworkError=o=>o?.category===t.NETWORK;e.isValidationError=o=>o?.category===t.VALIDATION;e.isAuthenticationError=o=>o?.category===t.AUTHENTICATION;e.isPaymentError=o=>o?.category===t.PAYMENT;e.isEventError=o=>o?.category===t.EVENT;e.isPermissionError=o=>o?.category===t.PERMISSION;e.isFileError=o=>o?.category===t.FILE;e.createNetworkError=(o,n,s)=>Object.assign({name:'NetworkError',message:o,category:t.NETWORK,statusCode:n,timestamp:Date.now()},s);e.createValidationError=(o,n,s)=>Object.assign({name:'ValidationError',message:o,category:t.VALIDATION,fields:n,timestamp:Date.now()},s);e.createAuthenticationError=(o,n)=>Object.assign({name:'AuthenticationError',message:o,category:t.AUTHENTICATION,timestamp:Date.now()},n);e.createPaymentError=(o,n)=>Object.assign({name:'PaymentError',message:o,category:t.PAYMENT,timestamp:Date.now()},n);e.createEventError=(o,n,s)=>Object.assign({name:'EventError',message:o,category:t.EVENT,eventId:n,timestamp:Date.now()},s);e.createPermissionError=(o,n,s,E)=>({name:'PermissionError',message:o,category:t.PERMISSION,permission:n,platform:s,canRequestAgain:E,timestamp:Date.now()});e.createFileError=(o,n,s)=>Object.assign({name:'FileError',message:o,category:t.FILE,operation:n,timestamp:Date.now()},s)},2002,[]);